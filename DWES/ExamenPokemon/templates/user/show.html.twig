{% extends 'base.html.twig' %}

{% block title %}User
{% endblock %}

{% block body %}
	<h1>Pokedex de
		{{ user.username }}</h1>

	<table class="table">
		<tbody>
			<tr>
				<th>Pokémon</th>
				<td>
					{% if user.getPokemon()|length > 0 %}
						<ul>
							{% for pokemon in user.getPokemon() %}
								<li>{{ pokemon.name }}
									<img src="{{ asset('uploads/imgs/' ~ pokemon.img) }}" style="width:50px;"></li>
								{# Añadir enlace para agregar Pokémon al equipo #}
                            
								{% if team is not null %}
									<a href="{{ path('app_team_add_pokemon', {'id': team.id, 'pokemonId': pokemon.id}) }}">Agregar a mi equipo</a>
								{% endif %}
							{% endfor %}
						</ul>
					{% else %}
						<p>No tiene ningún Pokémon todavía.</p>
					{% endif %}
				</td>
			</tr>
		</tbody>
	</table>
    {% if user.getTeams()|length > 0 %}

    {% for team in user.getTeams() %}
        hola
    {% endfor %}
        
    {% else %}
        <p>No hay equipos</p>
        <a href="{{ path('app_team_new',{})}}"> Crear equipo</a>
        <br>
    {% endif %}


	<a href="{{ path('app_pokemon_index') }}">Volver a Pokemons</a>
	{% if is_granted("ROLE_ADMIN") %}
		<a href="{{ path('app_user_edit', {'id': user.id}) }}">edit</a>

		{{ include('user/_delete_form.html.twig') }}

	{% endif %}
{% endblock %}
